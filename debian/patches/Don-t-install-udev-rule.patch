From 94c4e6d241244cafc037083b23191f253631b154 Mon Sep 17 00:00:00 2001
From: Pauli Nieminen <suokkos@gmail.com>
Date: Thu, 2 Jun 2011 19:17:41 +0300
Subject: [PATCH] Don't install udev rule

Instlling udev rule is pointless when sysprof is using standard
kernel interface for profiling.

Signed-off-by: Pauli Nieminen <suokkos@gmail.com>
---
 Makefile.am |    3 ---
 Makefile.in |   36 +++++++-----------------------------
 2 files changed, 7 insertions(+), 32 deletions(-)

diff --git a/Makefile.am b/Makefile.am
index 6436ab9..281ae9d 100644
--- a/Makefile.am
+++ b/Makefile.am
@@ -59,9 +59,6 @@ sysprof_LDADD = $(GUI_DEP_LIBS)
 
 endif
 
-udevdir = $(sysconfdir)/udev/rules.d
-dist_udev_DATA = 60-sysprof.rules
-
 pixmapsdir = $(datadir)/pixmaps
 
 dist_pkgdata_DATA = sysprof.glade
diff --git a/Makefile.in b/Makefile.in
index 5f518ac..6a9d9dc 100644
--- a/Makefile.in
+++ b/Makefile.in
@@ -174,9 +174,6 @@ SYSPROF_CORE = \
 
 @BUILD_GUI_TRUE@sysprof_LDADD = $(GUI_DEP_LIBS)
 
-udevdir = $(sysconfdir)/udev/rules.d
-dist_udev_DATA = 60-sysprof.rules
-
 pixmapsdir = $(datadir)/pixmaps
 
 dist_pkgdata_DATA = sysprof.glade
@@ -338,10 +335,10 @@ CCLD = $(CC)
 LINK = $(CCLD) $(AM_CFLAGS) $(CFLAGS) $(AM_LDFLAGS) $(LDFLAGS) -o $@
 DIST_SOURCES = $(am__sysprof_SOURCES_DIST) $(sysprof_cli_SOURCES) \
 	$(testelf_SOURCES) $(testunwind_SOURCES)
-DATA = $(dist_pixmaps_DATA) $(dist_pkgdata_DATA) $(dist_udev_DATA)
+DATA = $(dist_pixmaps_DATA) $(dist_pkgdata_DATA)
 
 DIST_COMMON = README $(dist_pixmaps_DATA) $(dist_pkgdata_DATA) \
-	$(dist_udev_DATA) $(srcdir)/Makefile.in $(srcdir)/configure \
+	$(srcdir)/Makefile.in $(srcdir)/configure \
 	AUTHORS COPYING ChangeLog INSTALL Makefile.am NEWS TODO \
 	aclocal.m4 compile config.h.in configure configure.ac depcomp \
 	install-sh missing mkinstalldirs
@@ -1295,24 +1292,6 @@ uninstall-dist_pkgdataDATA:
 	  echo " rm -f $(DESTDIR)$(pkgdatadir)/$$f"; \
 	  rm -f $(DESTDIR)$(pkgdatadir)/$$f; \
 	done
-dist_udevDATA_INSTALL = $(INSTALL_DATA)
-install-dist_udevDATA: $(dist_udev_DATA)
-	@$(NORMAL_INSTALL)
-	$(mkinstalldirs) $(DESTDIR)$(udevdir)
-	@list='$(dist_udev_DATA)'; for p in $$list; do \
-	  if test -f "$$p"; then d=; else d="$(srcdir)/"; fi; \
-	  f="`echo $$p | sed -e 's|^.*/||'`"; \
-	  echo " $(dist_udevDATA_INSTALL) $$d$$p $(DESTDIR)$(udevdir)/$$f"; \
-	  $(dist_udevDATA_INSTALL) $$d$$p $(DESTDIR)$(udevdir)/$$f; \
-	done
-
-uninstall-dist_udevDATA:
-	@$(NORMAL_UNINSTALL)
-	@list='$(dist_udev_DATA)'; for p in $$list; do \
-	  f="`echo $$p | sed -e 's|^.*/||'`"; \
-	  echo " rm -f $(DESTDIR)$(udevdir)/$$f"; \
-	  rm -f $(DESTDIR)$(udevdir)/$$f; \
-	done
 
 ETAGS = etags
 ETAGSFLAGS =
@@ -1484,7 +1463,7 @@ check: check-am
 all-am: Makefile $(PROGRAMS) $(DATA) config.h
 
 installdirs:
-	$(mkinstalldirs) $(DESTDIR)$(bindir) $(DESTDIR)$(pixmapsdir) $(DESTDIR)$(pkgdatadir) $(DESTDIR)$(udevdir)
+	$(mkinstalldirs) $(DESTDIR)$(bindir) $(DESTDIR)$(pixmapsdir) $(DESTDIR)$(pkgdatadir)
 install: install-am
 install-exec: install-exec-am
 install-data: install-data-am
@@ -1529,8 +1508,7 @@ info: info-am
 
 info-am:
 
-install-data-am: install-dist_pixmapsDATA install-dist_pkgdataDATA \
-	install-dist_udevDATA
+install-data-am: install-dist_pixmapsDATA install-dist_pkgdataDATA
 
 install-exec-am: install-binPROGRAMS
 
@@ -1560,7 +1538,7 @@ ps: ps-am
 ps-am:
 
 uninstall-am: uninstall-binPROGRAMS uninstall-dist_pixmapsDATA \
-	uninstall-dist_pkgdataDATA uninstall-dist_udevDATA \
+	uninstall-dist_pkgdataDATA \
 	uninstall-info-am
 
 .PHONY: CTAGS GTAGS all all-am check check-am clean clean-binPROGRAMS \
@@ -1570,13 +1548,13 @@ uninstall-am: uninstall-binPROGRAMS uninstall-dist_pixmapsDATA \
 	distdir distuninstallcheck dvi dvi-am info info-am install \
 	install-am install-binPROGRAMS install-data install-data-am \
 	install-dist_pixmapsDATA install-dist_pkgdataDATA \
-	install-dist_udevDATA install-exec install-exec-am install-info \
+	install-exec install-exec-am install-info \
 	install-info-am install-man install-strip installcheck \
 	installcheck-am installdirs maintainer-clean \
 	maintainer-clean-generic mostlyclean mostlyclean-compile \
 	mostlyclean-generic pdf pdf-am ps ps-am tags uninstall \
 	uninstall-am uninstall-binPROGRAMS uninstall-dist_pixmapsDATA \
-	uninstall-dist_pkgdataDATA uninstall-dist_udevDATA \
+	uninstall-dist_pkgdataDATA \
 	uninstall-info-am
 
 # Tell versions [3.59,3.63) of GNU make to not export all variables.
-- 
1.7.5.3

